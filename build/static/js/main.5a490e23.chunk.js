(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[5],{12:function(t,e,n){"use strict";n.r(e),n.d(e,"addContactRequest",(function(){return o})),n.d(e,"addContactSuccess",(function(){return i})),n.d(e,"addContactError",(function(){return s})),n.d(e,"deleteContactRequest",(function(){return b})),n.d(e,"deleteContactSuccess",(function(){return j})),n.d(e,"deleteContactError",(function(){return l})),n.d(e,"initContactsRequest",(function(){return r})),n.d(e,"initContactsSuccess",(function(){return a})),n.d(e,"initContactsError",(function(){return u})),n.d(e,"filterContacts",(function(){return d}));var c=n(3),r=Object(c.b)("contacts/initContactsRequest"),a=Object(c.b)("contacts/initContactsSuccess"),u=Object(c.b)("contacts/initContactsError"),o=Object(c.b)("contacts/addContactRequest"),i=Object(c.b)("contacts/addContactSuccess"),s=Object(c.b)("contacts/addContactError"),b=Object(c.b)("contacts/deleteContactRequest"),j=Object(c.b)("contacts/deleteContactSuccess"),l=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contact/filter")},121:function(t,e,n){},127:function(t,e,n){"use strict";n.r(e);var c,r,a=n(0),u=n.n(a),o=n(28),i=n.n(o),s=n(10),b=n(11),j=n(3),l=n(4),d=n(55),f=n(5),O=n(12),h=Object(j.c)([],(c={},Object(l.a)(c,O.initContactsSuccess,(function(t,e){return e.payload})),Object(l.a)(c,O.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(d.a)(t),[n])})),Object(l.a)(c,O.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),_=Object(j.c)(!1,(r={},Object(l.a)(r,O.addContactRequest,(function(){return!0})),Object(l.a)(r,O.addContactSuccess,(function(){return!1})),Object(l.a)(r,O.addContactError,(function(){return!1})),Object(l.a)(r,O.deleteContactRequest,(function(){return!0})),Object(l.a)(r,O.deleteContactSuccess,(function(){return!1})),Object(l.a)(r,O.deleteContactError,(function(){return!1})),Object(l.a)(r,O.initContactsRequest,(function(){return!0})),Object(l.a)(r,O.initContactsSuccess,(function(){return!1})),Object(l.a)(r,O.initContactsError,(function(){return!1})),Object(l.a)(r,f.b,(function(){return!0})),Object(l.a)(r,f.c,(function(){return!1})),Object(l.a)(r,f.a,(function(){return!1})),r)),p={itemsReducers:h,filterReducer:Object(j.c)("",Object(l.a)({},O.filterContacts,(function(t,e){return e.payload}))),loading:_,addContactReducer:Object(j.c)(!1,Object(l.a)({},O.addContactSuccess,(function(){return!1})))},g=n(23),v=n(78),x=n.n(v),m=n(13),C={key:"token",storage:x.a,whitelist:["token"]},k=Object(b.c)({items:p.itemsReducers,filter:p.filterReducer,loading:p.loading,addContact:p.addContactReducer}),y=Object(j.d)({serializableCheck:{ignoredActions:[g.a,g.f,g.b,g.c,g.d,g.e]}}),S=Object(g.g)(C,m.c),R=Object(j.a)({reducer:{auth:S,contacts:k},middleware:y}),N=Object(g.h)(R),z=(n(121),n(6)),w=n(144),E=n(29),q=n(46),A=n(2);function U(t){var e=t.children,n=Object(q.a)(t,["children"]),c=Object(s.c)(m.b.getToken);return Object(A.jsx)(z.b,Object(E.a)(Object(E.a)({},n),{},{children:Boolean(c)?e:Object(A.jsx)(z.a,{to:"/login"})}))}function B(t){var e=t.children,n=Object(q.a)(t,["children"]),c=Object(s.c)(m.b.getToken);return Object(A.jsx)(z.b,Object(E.a)(Object(E.a)({},n),{},{children:Boolean(c)&&n.restricted?Object(A.jsx)(z.a,{to:"/contacts"}):e}))}var L=n(21),F=n(27),T=n.n(F),D=n(47),P=n.n(D),I=n(84),J=n.n(I),V=n(80),W=n.n(V);function K(){var t=Object(s.c)(m.b.getToken);return Object(A.jsxs)("div",{className:P.a.app__nav,children:[Object(A.jsx)(L.b,{to:"/",className:P.a.nav__link,children:Object(A.jsx)(W.a,{htmlColor:"#45B39D",style:{fontSize:30}})}),Boolean(t)&&Object(A.jsx)(L.b,{to:"/contacts",className:P.a.nav__contacts,children:Object(A.jsx)(J.a,{htmlColor:"#45B39D",style:{fontSize:30}})})]})}var M=n(86),Q=n.n(M),Y=n(85),G=n.n(Y);function H(){var t=Object(s.c)(m.b.getToken),e=Object(s.c)((function(t){return t.auth.user.name})),n=Object(s.c)(m.b.isAutorizedUser),c=Object(s.b)();return Object(A.jsxs)("div",{className:T.a.navigation,children:[Object(A.jsx)(K,{}),Boolean(t)?Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:T.a.user__nav,children:[Object(A.jsx)(G.a,{fontSize:"large",htmlColor:"#45B39D",style:{fontSize:30}}),n&&Object(A.jsxs)("p",{className:T.a.user__name,children:["Welcome, ",e]}),Object(A.jsx)("button",{onClick:function(){return c(m.a.logoutUser())},className:T.a.logout__button,children:Object(A.jsx)(Q.a,{fontSize:"large",htmlColor:"#45B39D",style:{fontSize:30}})})]})}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(L.b,{to:"/login",className:T.a.nav__link,children:"Login"}),Object(A.jsx)(L.b,{to:"/register",className:T.a.nav__link,children:"Registration"})]})]})}var X=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,332))})),Z=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,335))})),$=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,337))})),tt=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,338))}));function et(){var t=Object(s.b)();return Object(a.useEffect)((function(){t(m.a.getCurrentUser())}),[t]),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(w.a,{maxWidth:"md",children:[Object(A.jsx)(H,{}),Object(A.jsx)(a.Suspense,{fallback:"loading",children:Object(A.jsxs)(z.d,{children:[Object(A.jsx)(z.b,{path:"/",exact:!0,component:X}),Object(A.jsx)(U,{path:"/contacts",exact:!0,component:Z}),Object(A.jsx)(B,{path:"/login",restricted:!0,exact:!0,component:tt}),Object(A.jsx)(B,{path:"/register",restricted:!0,exact:!0,component:$})]})})]})})}var nt=n(87);i.a.render(Object(A.jsx)(u.a.StrictMode,{children:Object(A.jsx)(s.a,{store:R,children:Object(A.jsx)(nt.a,{loading:null,persistor:N,children:Object(A.jsx)(L.a,{children:Object(A.jsx)(et,{})})})})}),document.getElementById("root"))},13:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return R})),n.d(e,"b",(function(){return r}));var c={};n.r(c),n.d(c,"getCurrentUser",(function(){return h})),n.d(c,"registerNewUser",(function(){return _})),n.d(c,"loginUser",(function(){return p})),n.d(c,"logoutUser",(function(){return g}));var r={};n.r(r),n.d(r,"isAutorizedUser",(function(){return N})),n.d(r,"getToken",(function(){return z}));var a=n(22),u=n.n(a),o=n(33),i=n(24),s=n.n(i),b=n(5);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var j,l,d,f=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},O=function(){s.a.defaults.headers.common.Authorization=""},h=function(){return function(){var t=Object(o.a)(u.a.mark((function t(e,n){var c,r,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),r=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return f(r),e(Object(b.b)()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:a=t.sent,o=a.data,e(Object(b.c)(o)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e(Object(b.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()},_=function(t){return function(){var e=Object(o.a)(u.a.mark((function e(n){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(b.k)()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:c=e.sent,r=c.data,f(r.token),n(Object(b.l)(r)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("registration error"),n(Object(b.j)(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(o.a)(u.a.mark((function e(n){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(b.e)()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:c=e.sent,r=c.data,f(r.token),n(Object(b.f)(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(Object(b.d)(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},g=function(){return function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(Object(b.h)());try{s.a.post("/users/logout"),O(),e(Object(b.i)())}catch(n){e(Object(b.g)(n.message))}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=n(4),x=n(3),m=n(11),C={email:null,name:null},k=Object(x.c)(C,(j={},Object(v.a)(j,b.c,(function(t,e){return e.payload})),Object(v.a)(j,b.l,(function(t,e){return e.payload.user})),Object(v.a)(j,b.f,(function(t,e){return e.payload.user})),Object(v.a)(j,b.i,(function(t,e){return C})),j)),y=Object(x.c)(null,(l={},Object(v.a)(l,b.l,(function(t,e){return e.payload.token})),Object(v.a)(l,b.f,(function(t,e){return e.payload.token})),Object(v.a)(l,b.i,(function(t,e){return null})),Object(v.a)(l,b.a,(function(){return null})),l)),S=Object(x.c)(!1,(d={},Object(v.a)(d,b.l,(function(){return!0})),Object(v.a)(d,b.c,(function(){return!0})),Object(v.a)(d,b.f,(function(){return!0})),Object(v.a)(d,b.d,(function(){return!1})),Object(v.a)(d,b.i,(function(){return!1})),Object(v.a)(d,b.j,(function(){return!1})),Object(v.a)(d,b.a,(function(){return!1})),d)),R=Object(m.c)({user:k,token:y,isAutorized:S}),N=function(t){return t.auth.isAutorized},z=function(t){return t.auth.token}},27:function(t,e,n){t.exports={navigation:"Navigation_navigation__1VtLy",user__nav:"Navigation_user__nav__1sYAA",logout__button:"Navigation_logout__button__cb9hl",nav__link:"Navigation_nav__link__3bFyi",user__name:"Navigation_user__name__2k4I-",user__circle:"Navigation_user__circle__3hlqF",user__avatar:"Navigation_user__avatar__29NKV"}},47:function(t,e,n){t.exports={app__nav:"AppNav_app__nav__m1Qe7",nav__contacts:"AppNav_nav__contacts__165Pl",nav__link:"AppNav_nav__link__sp8y_"}},5:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return l})),n.d(e,"k",(function(){return o})),n.d(e,"l",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"g",(function(){return O}));var c=n(3),r=Object(c.b)("auth/getCurrentUserRequest"),a=Object(c.b)("auth/getCurrentUserSuccess"),u=Object(c.b)("auth/getCurrentUserError"),o=Object(c.b)("auth/userRegisterRequest"),i=Object(c.b)("auth/userRegisterSuccess"),s=Object(c.b)("auth/userRegisterError"),b=Object(c.b)("auth/userLoginRequest"),j=Object(c.b)("auth/userLoginSuccess"),l=Object(c.b)("auth/userLoginError"),d=Object(c.b)("auth/userLogoutRequest"),f=Object(c.b)("auth/userLogoutSuccess"),O=Object(c.b)("auth/userLogoutError")}},[[127,7,8]]]);
//# sourceMappingURL=main.5a490e23.chunk.js.map